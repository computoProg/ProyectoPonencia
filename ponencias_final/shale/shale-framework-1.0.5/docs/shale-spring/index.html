





<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>
    Shale Spring Integration</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  </head>
  <body class="composite">
    <div id="banner">
                          <a href="http://www.apache.org" id="bannerLeft">
    
                                    <img src="http://www.apache.org/images/asf-logo.gif" alt="" />
    
            </a>
                          <a href="http://shale.apache.org" id="bannerRight">
    
                                            <img src="../images/shale-logo.jpg" alt="" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">Last Published: Mon Jun 02 11:06:25 CDT 2008</div>
      <div class="xright">  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn"><div id="navcolumn">      <h5>Sub-Project Documentation</h5>
    <ul>
              
    <li class="none">
          <a href="../shale-application/index.html">Application Controller</a>
        </li>
              
    <li class="none">
          <a href="../shale-clay/index.html">Clay Plug-In</a>
        </li>
              
    <li class="none">
          <a href="../shale-core/index.html">Core Library</a>
        </li>
              
    <li class="none">
          <a href="../shale-dialog/index.html">Dialog Manager</a>
        </li>
              
    <li class="none">
          <a href="../shale-dialog-basic/index.html">Dialog Manager (Basic Implementation)</a>
        </li>
              
    <li class="none">
          <a href="../shale-dialog-scxml/index.html">Dialog Manager (SCXML Implementation)</a>
        </li>
              
    <li class="none">
          <a href="../shale-remoting/index.html">Remoting</a>
        </li>
              
    <li class="none">
          <a href="../shale-spring/index.html">Spring Integration</a>
        </li>
              
    <li class="none">
          <a href="../shale-test/index.html">Test Framework</a>
        </li>
              
    <li class="none">
          <a href="../shale-tiger/index.html">Tiger Extensions</a>
        </li>
              
    <li class="none">
          <a href="../shale-validator/index.html">Validator Support</a>
        </li>
              
    <li class="none">
          <a href="../shale-view/index.html">View Controller</a>
        </li>
          </ul>
      <h5>Sample Apps Documentation</h5>
    <ul>
              
    <li class="none">
          <a href="../shale-apps/shale-blank/index.html">Blank Starter</a>
        </li>
              
    <li class="none">
          <a href="../shale-apps/shale-clay-usecases/index.html">Clay Use Cases</a>
        </li>
              
    <li class="none">
          <a href="../shale-apps/shale-mailreader/index.html">Mail Reader</a>
        </li>
              
    <li class="none">
          <a href="../shale-apps/shale-sql-browser/index.html">SQL Browser</a>
        </li>
              
    <li class="none">
          <a href="../shale-apps/shale-usecases/index.html">Use Cases</a>
        </li>
          </ul>
      <h5>Quick Links</h5>
    <ul>
              
    <li class="none">
          <a href="http://java.sun.com/javaee/javaserverfaces/">JavaServer Faces</a>
        </li>
              
    <li class="none">
          <a href="http://myfaces.apache.org">MyFaces</a>
        </li>
              
    <li class="none">
          <a href="http://shale.apache.org">Shale</a>
        </li>
              
    <li class="none">
          <a href="http://shale.apache.org/sandbox">Shale Sandbox</a>
        </li>
              
    <li class="none">
          <a href="http://struts.apache.org">Struts</a>
        </li>
              
    <li class="none">
          <a href="http://struts.apache.org/1.x/struts-faces">Struts-Faces Integration Library</a>
        </li>
          </ul>
      <h5>Project Documentation</h5>
    <ul>
              
    <li class="none">
          <strong><a href="index.html">About Shale Spring Integration</a></strong>
        </li>
              
                
        <li class="collapsed">
          <a href="project-info.html">Project Info</a>
                
            
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
          <ul>
                  
    <li class="none">
          <strong><a href="index.html">About</a></strong>
        </li>
                  
    <li class="none">
          <a href="integration.html">Continuous Integration</a>
        </li>
                  
    <li class="none">
          <a href="dependencies.html">Dependencies</a>
        </li>
                  
    <li class="none">
          <a href="dependency-convergence.html">Dependency Convergence</a>
        </li>
                  
    <li class="none">
          <a href="issue-tracking.html">Issue Tracking</a>
        </li>
                  
    <li class="none">
          <a href="mail-lists.html">Mailing Lists</a>
        </li>
                  
    <li class="none">
          <a href="license.html">Project License</a>
        </li>
                  
    <li class="none">
          <a href="project-summary.html">Project Summary</a>
        </li>
                  
    <li class="none">
          <a href="team-list.html">Project Team</a>
        </li>
                  
    <li class="none">
          <a href="source-repository.html">Source Repository</a>
        </li>
              </ul>
        </li>
              
                
        <li class="collapsed">
          <a href="maven-reports.html">Project Reports</a>
                
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        </li>
          </ul>
  <a href="http://maven.apache.org/" title="Built by Maven" id="poweredBy">
              <img alt="Built by Maven" src="./images/logos/maven-feather.png"></img>
            </a>
    </div></div>
    <div id="bodyColumn">
      <div id="contentBox">
        

  

  
    
    <div class="section"><h2>Shale Spring Integration</h2>
    <a name="spring"></a>

      <a name="spring-introduction"></a>
      <div class="section"><h3>Introduction</h3>

        <p>The <a href="http://springframework.org/">Spring Framework</a>
        is a popular application framework for Enterprise Java applications,
        featuring a powerful <em>Dependency Injection</em> mechanism
        (also known as <em>Inversion of Control</em>) for creating and
        configuring &quot;plain old Java objects&quot; (POJOs) on the fly.  Since
        verson 1.1.5, Spring has included an expression evaluation 
        mechanism (see below) for integration with JavaServer
        Faces.  Shale adds the ability to programmatically access the Spring
        <code>WebApplicationContext</code> for the current application.</p>

      </div>

      <a name="spring-services"></a>
      <div class="section"><h3>Services Provided</h3>

        <p>Spring provides a custom JavaServer Faces
        <code>VariableResolver</code> implementation that extends the standard
        JavaServer Faces managed beans mechanism.  When asked to resolve a
        variable name, the following algorithm is performed:</p>
        <ol>
        <li>Does a bean with the specified name already exist in some
            scope (request, session, application)?  If so, return it.</li>
        <li>Is there a standard JavaServer Faces managed bean definition for
            this variable name?  If so, invoke it in the usual way, and
            return the bean that was created.</li>
        <li>Is there configuration information for this variable name
            in the Spring <code>WebApplicationContext</code> for this
            application?  If so, use it to create and configure an instance,
            and return that instance to the caller.</li>
        <li>If there is no managed bean or Spring definition for this
            variable name, return <code>null</code> instead.</li>
        </ol>

        As a result of this algorithm, you can transparently use either
        JavaServer Faces or Spring facilities to create beans on demand.
        Note, however, that the Spring integration capabilities do not
        include the ability to place a Spring-created bean into a specified
        scope.  Therefore, it works best for application singletons, or for
        beans where you wish to create a new instance on every request.

        <p>Separately, Shale also provides a custom
        <code>VariableResolver</code> that exposes Spring's
        <code>WebApplicationContext</code> instance for the current
        application, using variable name <code>webApplicationContext</code>
        to look it up.  This is useful when an event handler wishes to
        explicitly invoke the bean factory to create beans on demand,
        such as a bean that encapsulates the business logic to be performed
        when a submit button is pressed.</p>

      </div>

      <a name="spring-using"></a>
      <div class="section"><h3>Using Shale-Spring Integration</h3>

        <p>In order to utilize the Spring integration, you will need to include
        Spring in your web application.  You can either include the all-in-one
        version (<code>spring.jar</code>) or the necessary individual
        components (<code>spring-core.jar</code>,
        <code>spring-context.jar</code>, and <code>spring-web.jar</code>).
        In order to utilize the Shale feature that exposes the
        <code>webApplicationContext</code> instance, you will need to
        include <code>shale-spring.jar</code>.</p>

        <p>Here are some sample use cases for leveraging the integration
        capabilities:</p>

        <h4>(1) Bind a JSF Component To An Applicaton Scope Bean</h4>

        <p>Imagine you have an application scope bean that contains
        domains (the lists of selection items used in drop down components)
        for your application.  You might bind a component to a property
        of this bean as follows:</p>

<div class="source"><pre>
  &lt;h:selectOneMenu id=&quot;category&quot; value=&quot;...&quot; ...&gt;
    &lt;f:selectItems value=&quot;#{domains.categories}&quot;/&gt;
  &lt;/h:selectOneMenu&gt;
</pre></div>

        <p>where the underlying object referenced by the logical name
        <code>domains</code> is expected to have a <code>getCategories()</code>
        method with a return type of <code>SelectItem[]</code>.
        The underlying bean class might be defined as a managed bean
        in <code>/WEB-INF/faces-context.xml</code>:</p>

<div class="source"><pre>
  &lt;managed-bean&gt;
    &lt;managed-bean-name&gt;domains&lt;/managed-bean-name&gt;
    &lt;managed-bean-class&gt;
      com.mycompany.mypackage.MyDomainsImpl
    &lt;/managed-bean-class&gt;
    &lt;managed-bean-scope&gt;application&lt;/managed-bean-scope&gt;
    ... configuration of managed properties ...
  &lt;/managed-bean&gt;
</pre></div>

        <p>or as a Spring bean in <code>/WEB-INF/applicationContext.xml</code>:</p>

<div class="source"><pre>
  &lt;bean id=&quot;domains&quot;
        class=&quot;com.mycompany.mypackage.MyDomainsImpl&quot;
        singleton=&quot;true&quot;&gt;
    ... configuration of managed properties ...
  &lt;/bean&gt;
</pre></div>

        <p>The binding expression will work with either definition
        of the bean, transparently.</p>

        <h4>(2) Access Encapsulated Business Logic Indirectly</h4>

        <p>Assume you have business logic to manage updating a customer
        database in a bean with logical name <code>CustomerDAO</code>.
        In the event handler for a submit button (here, assuming that
        your backing bean extends <code>AbstractViewController</code> or
        <code>AbstractFacesBean</code>), you can acquire a reference to
        the appropriate instance of this business logic bean by
        using a value binding expression programmatically:</p>

<div class="source"><pre>
  CustomerDAO dao = (CustomerDAO) getValue(&quot;#{CustomerDAO}&quot;);
</pre></div>

        <p>Again, the logic utilizing this expression is agnostic to
        whether the bean is actually created by JSF's managed bean
        facility, or by Spring's bean factory.</p>

        <h4>(3) Access Spring WebApplicationContext Directly</h4>

        <p>In some circumstances, applications will want to explicitly
        interact with Spring's bean factory (in a web application, this
        is typically an instance of <code>WebApplicationContext</code>.
        In order to retrieve the application wide instance of this
        class for the current web application, you may evaluate a
        value binding expression with a particular reserved name:</p>

<div class="source"><pre>
  WebApplicationContext wac = (WebApplicationContext)
    getValue(&quot;#{webApplicationContext}&quot;);
</pre></div>

        <p>Once you have this reference, you can explicitly invoke its
        methods to create or manage bean instances.  Interacting with it,
        of course, is using Spring facilities directly, so you are no
        longer able to transparently use managed beans.  However, you do
        have direct access to the extra facilities provided by Spring.</p>

      </div>

    </div>

  


      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2004-2008
    
          The Apache Software Foundation
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
