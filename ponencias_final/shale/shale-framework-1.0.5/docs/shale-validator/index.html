





<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>
    Shale Commons Validator Integration</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  </head>
  <body class="composite">
    <div id="banner">
                          <a href="http://www.apache.org" id="bannerLeft">
    
                                    <img src="http://www.apache.org/images/asf-logo.gif" alt="" />
    
            </a>
                          <a href="http://shale.apache.org" id="bannerRight">
    
                                            <img src="../images/shale-logo.jpg" alt="" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">Last Published: Mon Jun 02 11:12:10 CDT 2008</div>
      <div class="xright">  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn"><div id="navcolumn">      <h5>Shale Validator Taglib</h5>
    <ul>
              
    <li class="none">
          <a href="tagreference.html">Tag Reference</a>
        </li>
              
    <li class="none">
          <a href="tlddoc/index.html">Taglibdoc</a>
        </li>
          </ul>
      <h5>Sub-Project Documentation</h5>
    <ul>
              
    <li class="none">
          <a href="../shale-application/index.html">Application Controller</a>
        </li>
              
    <li class="none">
          <a href="../shale-clay/index.html">Clay Plug-In</a>
        </li>
              
    <li class="none">
          <a href="../shale-core/index.html">Core Library</a>
        </li>
              
    <li class="none">
          <a href="../shale-dialog/index.html">Dialog Manager</a>
        </li>
              
    <li class="none">
          <a href="../shale-dialog-basic/index.html">Dialog Manager (Basic Implementation)</a>
        </li>
              
    <li class="none">
          <a href="../shale-dialog-scxml/index.html">Dialog Manager (SCXML Implementation)</a>
        </li>
              
    <li class="none">
          <a href="../shale-remoting/index.html">Remoting</a>
        </li>
              
    <li class="none">
          <a href="../shale-spring/index.html">Spring Integration</a>
        </li>
              
    <li class="none">
          <a href="../shale-test/index.html">Test Framework</a>
        </li>
              
    <li class="none">
          <a href="../shale-tiger/index.html">Tiger Extensions</a>
        </li>
              
    <li class="none">
          <a href="../shale-validator/index.html">Validator Support</a>
        </li>
              
    <li class="none">
          <a href="../shale-view/index.html">View Controller</a>
        </li>
          </ul>
      <h5>Sample Apps Documentation</h5>
    <ul>
              
    <li class="none">
          <a href="../shale-apps/shale-blank/index.html">Blank Starter</a>
        </li>
              
    <li class="none">
          <a href="../shale-apps/shale-clay-usecases/index.html">Clay Use Cases</a>
        </li>
              
    <li class="none">
          <a href="../shale-apps/shale-mailreader/index.html">Mail Reader</a>
        </li>
              
    <li class="none">
          <a href="../shale-apps/shale-sql-browser/index.html">SQL Browser</a>
        </li>
              
    <li class="none">
          <a href="../shale-apps/shale-usecases/index.html">Use Cases</a>
        </li>
          </ul>
      <h5>Quick Links</h5>
    <ul>
              
    <li class="none">
          <a href="http://java.sun.com/javaee/javaserverfaces/">JavaServer Faces</a>
        </li>
              
    <li class="none">
          <a href="http://myfaces.apache.org">MyFaces</a>
        </li>
              
    <li class="none">
          <a href="http://shale.apache.org">Shale</a>
        </li>
              
    <li class="none">
          <a href="http://shale.apache.org/sandbox">Shale Sandbox</a>
        </li>
              
    <li class="none">
          <a href="http://struts.apache.org">Struts</a>
        </li>
              
    <li class="none">
          <a href="http://struts.apache.org/1.x/struts-faces">Struts-Faces Integration Library</a>
        </li>
          </ul>
      <h5>Project Documentation</h5>
    <ul>
              
    <li class="none">
          <strong><a href="index.html">About Shale Validator Integration</a></strong>
        </li>
              
                
        <li class="collapsed">
          <a href="project-info.html">Project Info</a>
                
            
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
          <ul>
                  
    <li class="none">
          <strong><a href="index.html">About</a></strong>
        </li>
                  
    <li class="none">
          <a href="integration.html">Continuous Integration</a>
        </li>
                  
    <li class="none">
          <a href="dependencies.html">Dependencies</a>
        </li>
                  
    <li class="none">
          <a href="dependency-convergence.html">Dependency Convergence</a>
        </li>
                  
    <li class="none">
          <a href="issue-tracking.html">Issue Tracking</a>
        </li>
                  
    <li class="none">
          <a href="mail-lists.html">Mailing Lists</a>
        </li>
                  
    <li class="none">
          <a href="license.html">Project License</a>
        </li>
                  
    <li class="none">
          <a href="project-summary.html">Project Summary</a>
        </li>
                  
    <li class="none">
          <a href="team-list.html">Project Team</a>
        </li>
                  
    <li class="none">
          <a href="source-repository.html">Source Repository</a>
        </li>
              </ul>
        </li>
              
                
        <li class="collapsed">
          <a href="maven-reports.html">Project Reports</a>
                
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        </li>
          </ul>
  <a href="http://maven.apache.org/" title="Built by Maven" id="poweredBy">
              <img alt="Built by Maven" src="./images/logos/maven-feather.png"></img>
            </a>
    </div></div>
    <div id="bodyColumn">
      <div id="contentBox">
        

  

  
    
    <div class="section"><h2>Commons Validator Integration</h2>
    <a name="validation"></a>

      <a name="validation-introduction"></a>
      <div class="section"><h3>Validation Introduction</h3>

        <p>JavaServer Faces 1.x does not explicitly support client-side
		  validation and only provides a minimal set of server-side
		  validators. On the other hand, <a href="http://commons.apache.org/validator/">Apache Commons Validator</a>
		  supports both client- and server-side validators and comes
		  with the following useful validators:</p>

        <ul>
        <li>Credit Card</li>
        <li>Date</li>
        <li>Email</li>
		  <li>Generic</li>
		  <li>ISBN</li>
		  <li>URL</li>
        </ul>

        All of the preceding validators can be executed either on
		  the client or the server, or both. Shale integrates JavaServer Faces
		  and the Commons Validator. 

      </div>

      <a name="validation-services"></a>
      <div class="section"><h3>Services Provided</h3>

        <p>Shale provides three JSP tags that let you use the Commons Validator:
		  <a href="tagreference.html#commonsValidator"><code>val:commonsValidator</code></a>,
          <a href="tagreference.html#validatorVar"><code>val:validatorVar</code></a>,
          and <a href="tagreference.html#validatorScript"><code>val:validatorScript</code></a>. The
		  first two lets you attach a commons validator to a JSF input component and
		  the third generates JavaScript validation code for validating each JSF component
		  that has one or more Commons validators in a particular form. You can attach as 
		  many Commons validators to a single JSF input component as you wish.</p>

      </div>

      <a name="validation-using"></a>
      <div class="section"><h3>Using Commons Validator Integration</h3>

        <p>Here's what you need to do to use Shale validation:</p>
		  <ul>
			<li>
			    Add an <code>onsubmit</code> attribute to your <code>h:form</code> tag that calls
				 the JavaScript validation function generated by <code>val:validatorScript</code>.
			</li>
			<li>
			    Add Commons validators to JSF input components with <code>val:commonsValidator</code>
                and, optionally, <code>val:validatorVar</code>.
			</li>
			<li>
			    Add an <code>val:validatorScript</code> tag at the end of the <code>h:form</code> tag's body.
			</li>
		  </ul>

        Here's an example:
<div class="source"><pre>
&lt;%@ taglib uri=&quot;http://shale.apache.org/core&quot; prefix=&quot;val&quot; %&gt;
...
&lt;h:form onsubmit=&quot;return validateForm(this);&quot;&gt;

    &lt;h:inputText id=&quot;creditCardNumber&quot; 
               size=&quot;16&quot;
              value=&quot;#{userContext.creditCardNumber}&quot;&gt;

        &lt;val:commonsValidator type=&quot;required&quot;
                             arg=&quot;#{msgs.creditCardNumberPrompt}&quot;
                          server=&quot;true&quot;
                          client=&quot;true&quot;/&gt;

        &lt;val:commonsValidator type=&quot;mask&quot;
                             arg=&quot;#{msgs.creditCardNumberPrompt}&quot;
                          server=&quot;true&quot;
                          client=&quot;true&quot;&gt;
            &lt;val:validatorVar name=&quot;mask&quot; value=&quot;[4-6].*&quot;/&gt;
        &lt;/val:commonsValidator&gt;

        &lt;val:commonsValidator type=&quot;creditCard&quot; 
                             arg=&quot;#{msgs.creditCardNumberPrompt}&quot; 
                          server=&quot;true&quot;/&gt;
    &lt;/h:inputText&gt; 

    &lt;h:message for=&quot;creditCardNumber&quot; styleClass=&quot;errors&quot;/&gt; 

    &lt;val:validatorScript functionName=&quot;validateForm&quot;/&gt;
&lt;/h:form&gt;
...
</pre></div>
        <p>In the preceding example, we've attached three Commons validators to a single
		     JSF input component. To pass validation, the field must have a value that
			  starts with a number between 4 and 6 inclusive and that value must be a valid
			  credit card number as verified by the <a href="http://en.wikipedia.org/wiki/Luhn_algorithm">Luhn</a> algorithm. Two of the
			  validations are performed on both client and server and one is performed
			  on the server only.</p>
			  <p><strong>Note:</strong> <i>At the present time, you have the option to forego
			  server-side validation, which is considered very bad practice. Users can turn off
			  JavaScript, so you should always backup client-side validation with server-side
			  validation. In the future, Shale may enforce server-side validation if it's
			  not explicitly specified.</i></p>
      </div>

      <a name="validation-custom"></a>
      <div class="section"><h3>Using Custom Validaton Rules</h3>
      
      <p>Shale's Commons Validator integration also allows you to use custom 
      validation rules.</p>
      
      <p>In most cases, you will want to include the default rule set in
      addition to your custom rules. In web.xml, use the
      <code>org.apache.shale.validator.VALIDATOR_RULES</code> context
      initialization parameter to specify a comma delimited list of files.</p>
      
<div class="source"><pre>
    &lt;!-- Shale Validator Configuration Resources --&gt;
    &lt;context-param&gt;
       &lt;param-name&gt;org.apache.shale.validator.VALIDATOR_RULES&lt;/param-name&gt;
       &lt;param-value&gt;
           /org/apache/shale/validator/validator-rules.xml,
           /WEB-INF/custom-rules.xml
       &lt;/param-value&gt;
    &lt;/context-param&gt;
</pre></div>

      <p>In this example, the default validator-rules.xml file will be loaded
      from the shale-core.jar archive, and the custom-rules.xml file will be
      loaded from WEB-INF.</p>
      
      <p>To replace one of the provided rules,
      place a modified copy of 
      <a href="http://svn.apache.org/repos/asf/shale/framework/branches/SHALE_1_0_X/shale-validator/src/main/resources/org/apache/shale/validator/validator-rules.xml">validator-rules.xml</a>
      in your webapp, and refer to it instead of the default file.</p>

      <p>To add messages for your own validation rules, or to
      customize the 
      <a href="http://svn.apache.org/repos/asf/shale/framework/branches/SHALE_1_0_X/shale-validator/src/main/resources/org/apache/shale/validator/messages.properties">provided messages,</a>
      configure a message bundle for your application in 
      /WEB-INF/faces-config.xml.</p>
      
      <p>More information on Shale's Commons Validator integration, including
      step-by-step examples, can be found on the 
      <a href="http://wiki.apache.org/shale/ShaleValidation">ShaleValidation</a>
      Wiki page.</p>
      
      </div>
      
   </div>


  


      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2004-2008
    
          The Apache Software Foundation
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
